import{r as o,j as e,c as S}from"./client-DbSn9K_I.chunk.js";const j="_options_1hb5m_27",k={options:j},v=()=>{const[w,u]=o.useState(!1),[p,m]=o.useState(null),r=o.useRef(null),s=o.useRef(null),c=o.useRef([]),R=async()=>{try{c.current=[],m(null);const n=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});n.getVideoTracks().forEach(t=>{t.enabled=!1,t.stop()});const g=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new AudioContext;s.current=a;const d=a.createMediaStreamDestination(),x=n.getAudioTracks()[0];x&&a.createMediaStreamSource(new MediaStream([x])).connect(d);const f=g.getAudioTracks()[0];f&&a.createMediaStreamSource(new MediaStream([f])).connect(d);const i=new MediaRecorder(d.stream);r.current=i,i.ondataavailable=t=>{t.data.size>0&&c.current.push(t.data)},i.onstop=()=>{const t=new Blob(c.current,{type:"audio/webm"}),b=URL.createObjectURL(t);m(b),n.getTracks().forEach(l=>l.stop()),g.getTracks().forEach(l=>l.stop()),s.current&&s.current.close()},i.start(),u(!0)}catch{alert("Failed to start recording. Make sure you allow microphone and system audio permissions.")}},y=()=>{r.current&&r.current.state!=="inactive"&&r.current.stop(),u(!1)};return e.jsxs("div",{className:k.options,style:{padding:"20px",maxWidth:"600px",margin:"0 auto",fontFamily:"sans-serif"},children:[e.jsx("h1",{children:"Interview Copilot Recorder"}),e.jsx("p",{children:"This extension page allows you to capture browser tab output and your microphone input simultaneously."}),e.jsx("div",{style:{marginTop:"30px"},children:w?e.jsx("button",{"data-testid":"stop-recording",onClick:y,style:{padding:"10px 20px",background:"#dc3545",color:"white",border:"none",cursor:"pointer",fontSize:"16px"},children:"Stop Recording"}):e.jsx("button",{"data-testid":"start-recording",onClick:R,style:{padding:"10px 20px",background:"#28a745",color:"white",border:"none",cursor:"pointer",fontSize:"16px"},children:"Start Recording"})}),p&&e.jsxs("div",{style:{marginTop:"20px"},"data-testid":"download-section",children:[e.jsx("p",{children:"Recording finished!"}),e.jsx("a",{"data-testid":"download-link",href:p,download:"interview_audio.webm",style:{color:"#007bff"},children:"Download Recording"})]})]})},h=document.getElementById("options-root");if(!h)throw new Error("Could not find root container to mount the app");const M=S.createRoot(h);M.render(e.jsx(o.StrictMode,{children:e.jsx(v,{})}));
